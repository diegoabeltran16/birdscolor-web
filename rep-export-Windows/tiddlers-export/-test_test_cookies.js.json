{
  "title": "-test_test_cookies.js",
  "text": "## [[Tags]]\n[[JavaScript]]\n\n```javascript\n\n// test_cookies.js — Ciclo 1, Módulo de Cookies\n// 🧪 Pruebas unitarias para validar el consentimiento y desbloqueo simbiótico\n\nimport { expect } from \"chai\";\n\ndescribe(\"🍪 cookies.js - Banner de cookies\", () => {\n  let banner, icono;\n\n  beforeEach(() => {\n    // 🧽 Limpiar entorno antes de cada test\n    localStorage.clear();\n    document.body.innerHTML = '';\n\n    // Simular elementos clave del DOM\n    banner = document.createElement(\"div\");\n    banner.id = \"cookie-banner\";\n    document.body.appendChild(banner);\n\n    icono = document.createElement(\"img\");\n    icono.id = \"icono\";\n    icono.classList.add(\"icono\", \"disabled\");\n    document.body.appendChild(icono);\n\n    // Simular los botones del banner\n    [\"accept-cookies\", \"accept-essential\", \"reject-cookies\", \"choose-cookies\"].forEach(id => {\n      const btn = document.createElement(\"button\");\n      btn.id = id;\n      document.body.appendChild(btn);\n    });\n\n    // Simular funciones globales necesarias\n    window.isPollitoEnabled = false;\n  });\n\n  it(\"✅ Aceptar cookies - guarda 'all' y habilita al pollito\", () => {\n    document.getElementById(\"accept-cookies\").click();\n    localStorage.setItem(\"cookiesConsent\", \"all\");\n    window.isPollitoEnabled = true;\n    icono.classList.remove(\"disabled\");\n\n    expect(localStorage.getItem(\"cookiesConsent\")).to.equal(\"all\");\n    expect(window.isPollitoEnabled).to.be.true;\n    expect(icono.classList.contains(\"disabled\")).to.be.false;\n  });\n\n  it(\"🍪 Esenciales - guarda 'essential' y habilita al pollito\", () => {\n    document.getElementById(\"accept-essential\").click();\n    localStorage.setItem(\"cookiesConsent\", \"essential\");\n    window.isPollitoEnabled = true;\n    icono.classList.remove(\"disabled\");\n\n    expect(localStorage.getItem(\"cookiesConsent\")).to.equal(\"essential\");\n    expect(window.isPollitoEnabled).to.be.true;\n    expect(icono.classList.contains(\"disabled\")).to.be.false;\n  });\n\n  it(\"❌ Rechazar - guarda 'none' y habilita al pollito\", () => {\n    document.getElementById(\"reject-cookies\").click();\n    localStorage.setItem(\"cookiesConsent\", \"none\");\n    window.isPollitoEnabled = true;\n    icono.classList.remove(\"disabled\");\n\n    expect(localStorage.getItem(\"cookiesConsent\")).to.equal(\"none\");\n    expect(window.isPollitoEnabled).to.be.true;\n    expect(icono.classList.contains(\"disabled\")).to.be.false;\n  });\n\n  it(\"🎛️ Elegir - guarda 'custom' y habilita al pollito\", () => {\n    document.getElementById(\"choose-cookies\").click();\n    localStorage.setItem(\"cookiesConsent\", \"custom\");\n    window.isPollitoEnabled = true;\n    icono.classList.remove(\"disabled\");\n\n    expect(localStorage.getItem(\"cookiesConsent\")).to.equal(\"custom\");\n    expect(window.isPollitoEnabled).to.be.true;\n    expect(icono.classList.contains(\"disabled\")).to.be.false;\n  });\n});\n\n```",
  "tags": "[[JavaScript]]",
  "type": "text/markdown",
  "created": "20250605155046958",
  "modified": "20250605155046958"
}