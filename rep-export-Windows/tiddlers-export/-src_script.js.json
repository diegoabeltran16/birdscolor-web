{
  "title": "-src_script.js",
  "text": "## [[Tags]]\nJavaScript [[---  Helices de desarrollo]] [[---  Detalles del proyecto]] [[---  Principios de programaci贸n]] [[--- Codigo]] [[锔К src/]]\n\n```javascript\n// Definimos la funci贸n de redirecci贸n de forma global\nwindow.redirectTo = function(url) {\n    console.log(\"Redirigiendo a:\", url);\n    window.location.href = url;\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    console.log(\"DOM completamente cargado en script.js\");\n\n    const pollito = document.getElementById(\"icono\");\n    const spinner = document.getElementById(\"spinner\");\n    if (!pollito || !spinner) {\n        console.error(\"Elemento 'icono' o 'spinner' no encontrado.\");\n        return;\n    }\n\n    const REDIRECT_DELAY = 1000; // Tiempo antes de mostrar el spinner (opcional)\n\n    // Funci贸n para enviar datos del clic (puedes mantener la l贸gica existente)\n    const sendClickEvent = async () => {\n        const eventData = {\n            event: \"click_pollito\",\n            timestamp: new Date().toISOString()\n        };\n        try {\n            await fetch(\"https://powerautomate-webhook.com\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(eventData)\n            });\n        } catch (error) {\n            console.error(\"Error al enviar el evento.\", error);\n            // Aqu铆 podr铆as guardar el evento localmente si lo deseas.\n        }\n        \n        if (typeof gtag === \"function\") {\n            gtag('event', 'click_pollito', {\n                'event_category': 'Interacci贸n',\n                'event_label': 'Icono Pollito',\n                'value': 1\n            });\n        }\n    };\n\n    // Funci贸n para manejar el clic en el pollito\n    const handlePollitoClick = () => {\n        console.log(\" Clic en el pollito registrado\");\n        sendClickEvent();\n\n        // Agregar la clase \"bounce\" para feedback visual\n        pollito.classList.add(\"bounce\");\n\n        pollito.addEventListener(\"animationend\", function restoreAnimation(e) {\n            if (e.animationName === \"bounce\") {\n                pollito.style.display = \"none\";\n                spinner.style.display = \"block\";\n                pollito.classList.remove(\"bounce\");\n                pollito.removeEventListener(\"animationend\", restoreAnimation);\n            }\n        });\n\n        // En lugar de redirigir inmediatamente, mostramos el banner de cookies\n        // Se asume que cookies.js define la funci贸n global showCookieBanner()\n        setTimeout(() => {\n            if (typeof showCookieBanner === \"function\") {\n                showCookieBanner();\n            } else {\n                console.warn(\"No se encontr贸 la funci贸n showCookieBanner(). Redirigiendo de forma predeterminada.\");\n                const lang = localStorage.getItem(\"idioma\") || \"es\";\n                window.redirectTo(`simbiosis_${lang}.html`);\n            }\n        }, REDIRECT_DELAY);\n    };\n\n    pollito.addEventListener(\"click\", handlePollitoClick);\n});\n\n// Opcional: Agregar la animaci贸n bounce din谩micamente (si no est谩 en CSS)\nconst style = document.createElement(\"style\");\nstyle.innerHTML = `\n    @keyframes bounce {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.2); }\n    }\n`;\ndocument.head.appendChild(style);\n\n```",
  "tags": "JavaScript [[---  Helices de desarrollo]] [[---  Detalles del proyecto]] [[---  Principios de programaci贸n]] [[--- Codigo]] [[锔К src/]]",
  "type": "text/markdown",
  "created": "20250605164433551",
  "modified": "20250605164433551"
}